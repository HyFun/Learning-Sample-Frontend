<!--
 * @Author       : HyFun
 * @Date         : 2021-09-02 17:00:09
 * @Description  : js节流
 * @LastEditors  : HyFun
 * @LastEditTime : 2021-09-02 17:27:06
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>js节流</title>
  </head>
  <body>
    <h3>0</h3>
    <button>点我+1</button>
  </body>
  <script>
    function createJL(fn, time = 200) {
      var timer = null
      return function () {
        if (timer) return
        timer = setTimeout(() => {
          fn(...arguments)
          timer = null
        }, time)
      }
    }

    var handler = createJL(function (e) {
      console.log(e)
      var h3 = document.querySelector('h3')
      h3.innerText = Number(h3.innerText) + 1
    }, 500)
    var button = document.querySelector('button')
    button.addEventListener('click', handler)
  </script>
</html>
